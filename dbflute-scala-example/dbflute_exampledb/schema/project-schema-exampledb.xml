<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE database SYSTEM "http://dbflute.sandbox.seasar.org/meta/database.dtd">
<!-- Auto-generated by JDBC task! -->
<database name="PUBLIC">
    <table
        comment="会員: 会員のプロフィールやアカウントなどの基本情報を保持する。&#xa;基本的に物理削除はなく、退会したらステータスが退会会員になる。&#xa;ライフサイクルやカテゴリの違う会員情報は、one-to-oneなどの関連テーブルにて。"
        name="MEMBER" schema="EXAMPLEDB.PUBLIC" type="TABLE">
        <column autoIncrement="true"
            comment="会員ID: 連番として自動採番される。会員IDだけに限らず採番方法はDBMS次第。"
            dbType="INTEGER"
            default="NEXT VALUE FOR PUBLIC.SYSTEM_SEQUENCE_FA1684DA_3756_43F8_8864_B63B7B02D7E0"
            javaType="Integer" name="MEMBER_ID" pkName="CONSTRAINT_8"
            primaryKey="true" required="true" size="10" type="INTEGER"/>
        <column
            comment="会員名称: 会員のフルネームの名称。&#xa;苗字と名前を分けて管理することが多いが、ここでは単純にひとまとめ。"
            dbType="VARCHAR" javaType="String" name="MEMBER_NAME"
            required="true" size="200" type="VARCHAR"/>
        <column
            comment="会員アカウント: ログインIDとして利用する。&#xa;昨今メールアドレスをログインIDとすることが多いので、あまり見かけないかも!?"
            dbType="VARCHAR" javaType="String" name="MEMBER_ACCOUNT"
            required="true" size="50" type="VARCHAR"/>
        <column
            comment="会員ステータスコード: 会員ステータスを参照するコード。&#xa;ステータスが変わるたびに、このカラムが更新される。"
            dbType="CHAR" javaType="String" name="MEMBER_STATUS_CODE"
            required="true" size="3" type="CHAR"/>
        <column
            comment="正式会員日時: 会員が正式に確定した(正式会員になった)日時。&#xa;一度確定したらもう二度と更新されないはずだ！"
            dbType="TIMESTAMP" javaType="java.sql.Timestamp"
            name="FORMALIZED_DATETIME" size="23, 10" type="TIMESTAMP"/>
        <column comment="生年月日: 必須項目ではないので、このデータがない会員もいる。" dbType="DATE"
            javaType="java.util.Date" name="BIRTHDATE" size="8" type="DATE"/>
        <column
            comment="登録日時: レコードが登録された日時。&#xa;会員が登録された日時とほぼ等しいが、そういった業務的な役割を兼務させるのはあまり推奨されない。といいつつ、このテーブルには会員登録日時がない...&#xa;仕様はどのテーブルでも同じなので、共通カラムの説明はこのテーブルでしか書かない。"
            dbType="TIMESTAMP" javaType="java.sql.Timestamp"
            name="REGISTER_DATETIME" required="true" size="23, 10" type="TIMESTAMP"/>
        <column
            comment="登録ユーザ: レコードを登録したユーザ。&#xa;会員テーブルであれば当然、会員自身であるはずだが、他のテーブルの場合では管理画面から運用者による登録など考えられるので、しっかり保持しておく。"
            dbType="VARCHAR" javaType="String" name="REGISTER_USER"
            required="true" size="200" type="VARCHAR"/>
        <column
            comment="更新日時: レコードが（最後に）更新された日時。&#xa;業務的な利用はあまり推奨されないと別項目で説明したが、このカラムはソートの要素としてよく利用される。"
            dbType="TIMESTAMP" javaType="java.sql.Timestamp"
            name="UPDATE_DATETIME" required="true" size="23, 10" type="TIMESTAMP"/>
        <column
            comment="更新ユーザ: レコードを更新したユーザ。&#xa;システムは誰が何をしたのかちゃんと覚えているのさ。"
            dbType="VARCHAR" javaType="String" name="UPDATE_USER"
            required="true" size="200" type="VARCHAR"/>
        <column
            comment="バージョンNO: データのバージョンを示すナンバー。&#xa;更新回数と等しく、主に排他制御のために利用される。"
            dbType="BIGINT" javaType="Long" name="VERSION_NO"
            required="true" size="19" type="BIGINT"/>
        <foreign-key foreignSchema="EXAMPLEDB.PUBLIC"
            foreignTable="MEMBER_STATUS" name="FK_MEMBER_MEMBER_STATUS">
            <reference foreign="MEMBER_STATUS_CODE" local="MEMBER_STATUS_CODE"/>
        </foreign-key>
        <unique name="UQ_MEMBER_MEMBER_ACCOUNT_INDEX_8">
            <unique-column name="MEMBER_ACCOUNT" position="1"/>
        </unique>
        <index name="FK_MEMBER_MEMBER_STATUS_INDEX_8">
            <index-column name="MEMBER_STATUS_CODE" position="1"/>
        </index>
        <index name="IX_MEMBER_FORMALIZED_DATETIME">
            <index-column name="FORMALIZED_DATETIME" position="1"/>
        </index>
        <index name="IX_MEMBER_MEMBER_NAME">
            <index-column name="MEMBER_NAME" position="1"/>
        </index>
    </table>
    <table
        comment="会員サービス: 会員のサービス情報（ポイントサービスなど）。&#xa;テストケースのために、あえて統一性を崩してユニーク制約経由の one-to-one を表現している。"
        name="MEMBER_SERVICE" schema="EXAMPLEDB.PUBLIC" type="TABLE">
        <column autoIncrement="true"
            comment="会員サービスID: 独立した主キーとなるが、実質的に会員IDとは one-to-one である。"
            dbType="INTEGER"
            default="NEXT VALUE FOR PUBLIC.SYSTEM_SEQUENCE_8D17D218_BC51_4839_BABE_A0866DE45DED"
            javaType="Integer" name="MEMBER_SERVICE_ID"
            pkName="CONSTRAINT_6F" primaryKey="true" required="true"
            size="10" type="INTEGER"/>
        <column comment="会員ID: 会員を参照するID。ユニークなので、会員とは one-to-one の関係に。"
            dbType="INTEGER" javaType="Integer" name="MEMBER_ID"
            required="true" size="10" type="INTEGER"/>
        <column comment="サービスポイント数: 購入したら増えて使ったら減る。" dbType="INTEGER"
            javaType="Integer" name="SERVICE_POINT_COUNT"
            required="true" size="10" type="INTEGER"/>
        <column comment="サービスランクコード: どんなランクがあるのかドキドキですね。" dbType="CHAR"
            javaType="String" name="SERVICE_RANK_CODE" required="true"
            size="3" type="CHAR"/>
        <column comment="" dbType="TIMESTAMP"
            javaType="java.sql.Timestamp" name="REGISTER_DATETIME"
            required="true" size="23, 10" type="TIMESTAMP"/>
        <column comment="" dbType="VARCHAR" javaType="String"
            name="REGISTER_USER" required="true" size="200" type="VARCHAR"/>
        <column comment="" dbType="TIMESTAMP"
            javaType="java.sql.Timestamp" name="UPDATE_DATETIME"
            required="true" size="23, 10" type="TIMESTAMP"/>
        <column comment="" dbType="VARCHAR" javaType="String"
            name="UPDATE_USER" required="true" size="200" type="VARCHAR"/>
        <column comment="" dbType="BIGINT" javaType="Long"
            name="VERSION_NO" required="true" size="19" type="BIGINT"/>
        <foreign-key foreignSchema="EXAMPLEDB.PUBLIC"
            foreignTable="MEMBER" name="FK_MEMBER_SERVICE_MEMBER">
            <reference foreign="MEMBER_ID" local="MEMBER_ID"/>
        </foreign-key>
        <foreign-key foreignSchema="EXAMPLEDB.PUBLIC"
            foreignTable="SERVICE_RANK" name="FK_MEMBER_SERVICE_SERVICE_RANK_CODE">
            <reference foreign="SERVICE_RANK_CODE" local="SERVICE_RANK_CODE"/>
        </foreign-key>
        <unique name="UQ_MEMBER_SERVICE_INDEX_6">
            <unique-column name="MEMBER_ID" position="1"/>
        </unique>
        <index name="FK_MEMBER_SERVICE_MEMBER_INDEX_6">
            <index-column name="MEMBER_ID" position="1"/>
        </index>
        <index name="FK_MEMBER_SERVICE_SERVICE_RANK_CODE_INDEX_6">
            <index-column name="SERVICE_RANK_CODE" position="1"/>
        </index>
        <index name="IX_MEMBER_SERVICE_POINT_COUNT">
            <index-column name="SERVICE_POINT_COUNT" position="1"/>
        </index>
    </table>
    <table
        comment="会員ステータス: 会員のステータスを示す固定的なマスタテーブル。いわゆるテーブル区分値！&#xa;業務運用上で増えることはなく、増減するときはプログラム修正ともなうレベルの業務変更と考えられる。&#xa;&#xa;こういった固定的なマスタテーブルには、更新日時などの共通カラムは定義していないが、業務上そういった情報を管理する必要性が低いという理由に加え、ExampleDBとして共通カラムでER図が埋め尽くされてしまい見づらくなるというところで割り切っている。実業務では統一的に定義することもある。"
        name="MEMBER_STATUS" schema="EXAMPLEDB.PUBLIC" type="TABLE">
        <column
            comment="会員ステータスコード: 会員ステータスを識別するコード。&#xa;固定的なデータなので連番とか番号にはせず、データを直接見たときも人が直感的にわかるように、例えば &quot;FML&quot; とかの３桁のコード形式にしている。(3って何会員だっけ？とかの問答をやりたくないので)&#xa;"
            dbType="CHAR" javaType="String" name="MEMBER_STATUS_CODE"
            pkName="CONSTRAINT_4" primaryKey="true" required="true"
            size="3" type="CHAR"/>
        <column
            comment="会員ステータス名称: 表示用の名称。&#xa;国際化対応するときはもっと色々考える必要があるかと...ということで英語名カラムがないので、そのまま区分値メソッド名の一部としても利用される。"
            dbType="VARCHAR" javaType="String" name="MEMBER_STATUS_NAME"
            required="true" size="50" type="VARCHAR"/>
        <column
            comment="説明: 会員ステータスそれぞれの説明。&#xa;区分値の一つ一つの要素に気の利いた説明があるとディベロッパーがとても助かるので絶対に欲しい。"
            dbType="VARCHAR" javaType="String" name="DESCRIPTION"
            required="true" size="200" type="VARCHAR"/>
        <column
            comment="表示順: UI上のステータスの表示順を示すNO。&#xa;並べるときは、このカラムに対して昇順のソート条件にする。"
            dbType="INTEGER" javaType="Integer" name="DISPLAY_ORDER"
            required="true" size="10" type="INTEGER"/>
        <unique name="UQ_MEMBER_STATUS_DISPLAY_ORDER_INDEX_4">
            <unique-column name="DISPLAY_ORDER" position="1"/>
        </unique>
    </table>
    <table comment="商品:" name="PRODUCT" schema="EXAMPLEDB.PUBLIC" type="TABLE">
        <column autoIncrement="true" comment="" dbType="INTEGER"
            default="NEXT VALUE FOR PUBLIC.SYSTEM_SEQUENCE_9A12AA93_3C4A_49F6_9457_58F83DD644F2"
            javaType="Integer" name="PRODUCT_ID" pkName="CONSTRAINT_1"
            primaryKey="true" required="true" size="10" type="INTEGER"/>
        <column
            comment="商品名称: ExampleDBとして、コメントの少ないケースを表現するため、あえてコメントを控えている。&#xa;実業務ではしっかりとコメントを入れることが強く強く推奨される。「よりによってこのテーブルでやらないでよ！」あわわ、何も聞こえません〜"
            dbType="VARCHAR" javaType="String" name="PRODUCT_NAME"
            required="true" size="50" type="VARCHAR"/>
        <column
            comment="商品ハンドルコード: これだけは書いておこう、商品を識別する業務上のコード。よく品番とか言うかもしれませんねぇ..."
            dbType="VARCHAR" javaType="String"
            name="PRODUCT_HANDLE_CODE" required="true" size="100" type="VARCHAR"/>
        <column comment="" dbType="CHAR" javaType="String"
            name="PRODUCT_CATEGORY_CODE" required="true" size="3" type="CHAR"/>
        <column comment="" dbType="CHAR" javaType="String"
            name="PRODUCT_STATUS_CODE" required="true" size="3" type="CHAR"/>
        <column comment="定価:" dbType="INTEGER" javaType="Integer"
            name="REGULAR_PRICE" required="true" size="10" type="INTEGER"/>
        <column comment="" dbType="TIMESTAMP"
            javaType="java.sql.Timestamp" name="REGISTER_DATETIME"
            required="true" size="23, 10" type="TIMESTAMP"/>
        <column comment="" dbType="VARCHAR" javaType="String"
            name="REGISTER_USER" required="true" size="200" type="VARCHAR"/>
        <column comment="" dbType="TIMESTAMP"
            javaType="java.sql.Timestamp" name="UPDATE_DATETIME"
            required="true" size="23, 10" type="TIMESTAMP"/>
        <column comment="" dbType="VARCHAR" javaType="String"
            name="UPDATE_USER" required="true" size="200" type="VARCHAR"/>
        <column comment="" dbType="BIGINT" javaType="Long"
            name="VERSION_NO" required="true" size="19" type="BIGINT"/>
        <unique name="UQ_PRODUCT_PRODUCT_HANDLE_CODE_INDEX_1">
            <unique-column name="PRODUCT_HANDLE_CODE" position="1"/>
        </unique>
        <index name="FK_PRODUCT_PRODUCT_CATEGORY_INDEX_1">
            <index-column name="PRODUCT_CATEGORY_CODE" position="1"/>
        </index>
        <index name="FK_PRODUCT_PRODUCT_STATUS_INDEX_1">
            <index-column name="PRODUCT_STATUS_CODE" position="1"/>
        </index>
        <index name="IX_PRODUCT_PRODUCT_NAME">
            <index-column name="PRODUCT_NAME" position="1"/>
        </index>
    </table>
    <table
        comment="購入: 一つの商品に対する購入を表現する(購入履歴とも言える)。&#xa;実業務であれば購入詳細というテーブルを作り、「購入という行為」と「その中身（詳細）」を違う粒度のデータとしてそれぞれ管理するのが一般的と言えるでしょう。というか、注文とか請求とかそういうことを考え始めたらもっと複雑になるはずですが、ExampleDBということで割り切っています。"
        name="PURCHASE" schema="EXAMPLEDB.PUBLIC" type="TABLE">
        <column autoIncrement="true" comment="" dbType="BIGINT"
            default="NEXT VALUE FOR PUBLIC.SYSTEM_SEQUENCE_74C1ED36_BDAB_4D9D_9520_FA5690F4EE7A"
            javaType="Long" name="PURCHASE_ID" pkName="CONSTRAINT_9"
            primaryKey="true" required="true" size="19" type="BIGINT"/>
        <column
            comment="会員ID: 会員を参照するID。&#xa;購入を識別する自然キー(複合ユニーク制約)の筆頭要素。"
            dbType="INTEGER" javaType="Integer" name="MEMBER_ID"
            required="true" size="10" type="INTEGER"/>
        <column comment="商品ID: あなたは何を買ったのか？" dbType="INTEGER"
            javaType="Integer" name="PRODUCT_ID" required="true"
            size="10" type="INTEGER"/>
        <column comment="購入日時: 購入した瞬間の日時。" dbType="TIMESTAMP"
            javaType="java.sql.Timestamp" name="PURCHASE_DATETIME"
            required="true" size="23, 10" type="TIMESTAMP"/>
        <column comment="購入数量: 購入した商品の一回の購入における数量。" dbType="INTEGER"
            javaType="Integer" name="PURCHASE_COUNT" required="true"
            size="10" type="INTEGER"/>
        <column
            comment="購入価格: 購入によって実際に会員が支払った（支払う予定の）価格。&#xa;基本は商品の定価に購入数量を掛けたものになるが、ポイント利用や割引があったりと必ずしもそうはならない。"
            dbType="INTEGER" javaType="Integer" name="PURCHASE_PRICE"
            required="true" size="10" type="INTEGER"/>
        <column comment="支払完了フラグ: この購入に関しての支払いが完了しているか否か。"
            dbType="INTEGER" javaType="Integer"
            name="PAYMENT_COMPLETE_FLG" required="true" size="10" type="INTEGER"/>
        <column comment="" dbType="TIMESTAMP"
            javaType="java.sql.Timestamp" name="REGISTER_DATETIME"
            required="true" size="23, 10" type="TIMESTAMP"/>
        <column comment="" dbType="VARCHAR" javaType="String"
            name="REGISTER_USER" required="true" size="200" type="VARCHAR"/>
        <column comment="" dbType="TIMESTAMP"
            javaType="java.sql.Timestamp" name="UPDATE_DATETIME"
            required="true" size="23, 10" type="TIMESTAMP"/>
        <column comment="" dbType="VARCHAR" javaType="String"
            name="UPDATE_USER" required="true" size="200" type="VARCHAR"/>
        <column comment="" dbType="BIGINT" javaType="Long"
            name="VERSION_NO" required="true" size="19" type="BIGINT"/>
        <foreign-key foreignSchema="EXAMPLEDB.PUBLIC"
            foreignTable="MEMBER" name="FK_PURCHASE_MEMBER">
            <reference foreign="MEMBER_ID" local="MEMBER_ID"/>
        </foreign-key>
        <foreign-key foreignSchema="EXAMPLEDB.PUBLIC"
            foreignTable="PRODUCT" name="FK_PURCHASE_PRODUCT">
            <reference foreign="PRODUCT_ID" local="PRODUCT_ID"/>
        </foreign-key>
        <unique name="UQ_PURCHASE_INDEX_9">
            <unique-column name="MEMBER_ID" position="1"/>
            <unique-column name="PRODUCT_ID" position="2"/>
            <unique-column name="PURCHASE_DATETIME" position="3"/>
        </unique>
        <index name="FK_PURCHASE_MEMBER_INDEX_9">
            <index-column name="MEMBER_ID" position="1"/>
        </index>
        <index name="FK_PURCHASE_PRODUCT_INDEX_9">
            <index-column name="PRODUCT_ID" position="1"/>
        </index>
        <index name="IX_PURCHASE_DATETIME_MEMBER">
            <index-column name="PURCHASE_DATETIME" position="1"/>
            <index-column name="MEMBER_ID" position="2"/>
        </index>
        <index name="IX_PURCHASE_PRICE">
            <index-column name="PURCHASE_PRICE" position="1"/>
        </index>
        <index name="IX_PURCHASE_PRODUCT_DATETIME">
            <index-column name="PRODUCT_ID" position="1"/>
            <index-column name="PURCHASE_DATETIME" position="2"/>
        </index>
    </table>
    <table comment="サービスランク: 会員のサービスレベルを表現するランク。(ゴールドとかプラチナとか)"
        name="SERVICE_RANK" schema="EXAMPLEDB.PUBLIC" type="TABLE">
        <column comment="サービスランクコード: サービスランクを識別するコード。" dbType="CHAR"
            javaType="String" name="SERVICE_RANK_CODE"
            pkName="CONSTRAINT_A" primaryKey="true" required="true"
            size="3" type="CHAR"/>
        <column
            comment="サービスランク名称: サービスランクの名称。&#xa;ゴールドとかプラチナとか基本的には威厳のある名前"
            dbType="VARCHAR" javaType="String" name="SERVICE_RANK_NAME"
            required="true" size="50" type="VARCHAR"/>
        <column
            comment="サービスポイント発生率: 購入ごとのサービスポイントの発生率。&#xa;購入価格にこの値をかけた数が発生ポイント。ExampleDBとして数少ない貴重な小数点ありのカラム。"
            dbType="DECIMAL" javaType="java.math.BigDecimal"
            name="SERVICE_POINT_INCIDENCE" required="true" size="5, 3" type="DECIMAL"/>
        <column comment="新規受け入れ可能フラグ: このランクへの新規受け入れができるかどうか。"
            dbType="INTEGER" javaType="Integer"
            name="NEW_ACCEPTABLE_FLG" required="true" size="10" type="INTEGER"/>
        <column comment="説明: ランクに関する業務的な説明。" dbType="VARCHAR"
            javaType="String" name="DESCRIPTION" required="true"
            size="200" type="VARCHAR"/>
        <column comment="表示順: UI上の表示順を表現する番号。" dbType="INTEGER"
            javaType="Integer" name="DISPLAY_ORDER" required="true"
            size="10" type="INTEGER"/>
        <unique name="UQ_SERVICE_RANK_DISPLAY_ORDER_INDEX_A">
            <unique-column name="DISPLAY_ORDER" position="1"/>
        </unique>
    </table>
    <sequenceGroup>
        <sequence incrementSize="1"
            name="SYSTEM_SEQUENCE_74C1ED36_BDAB_4D9D_9520_FA5690F4EE7A" schema="EXAMPLEDB.PUBLIC"/>
        <sequence incrementSize="1"
            name="SYSTEM_SEQUENCE_378EF829_F2BD_49A9_A5FC_3290C57DF398" schema="EXAMPLEDB.PUBLIC"/>
        <sequence incrementSize="1" name="SEQ_NOT_RELATED_TO_TABLE" schema="EXAMPLEDB.PUBLIC"/>
        <sequence incrementSize="1"
            name="SYSTEM_SEQUENCE_5A1FE470_1D6E_49E2_8230_D58B7F77294B" schema="EXAMPLEDB.PUBLIC"/>
        <sequence incrementSize="1"
            name="SYSTEM_SEQUENCE_9A12AA93_3C4A_49F6_9457_58F83DD644F2" schema="EXAMPLEDB.PUBLIC"/>
        <sequence incrementSize="1"
            name="SYSTEM_SEQUENCE_893718ED_B32D_494D_8C87_ACE85646A66B" schema="EXAMPLEDB.PUBLIC"/>
        <sequence incrementSize="8" name="SEQ_PURCHASE" schema="EXAMPLEDB.PUBLIC"/>
        <sequence incrementSize="1"
            name="SYSTEM_SEQUENCE_8D17D218_BC51_4839_BABE_A0866DE45DED" schema="EXAMPLEDB.PUBLIC"/>
        <sequence incrementSize="1"
            name="SYSTEM_SEQUENCE_7A789A17_D3F3_4723_ACB1_962AAE211118" schema="EXAMPLEDB.PUBLIC"/>
        <sequence incrementSize="1" name="SEQ_MEMBER" schema="EXAMPLEDB.PUBLIC"/>
        <sequence incrementSize="1"
            name="SYSTEM_SEQUENCE_85ED87AF_07D9_4DD5_9262_81E70DF9FDB1" schema="EXAMPLEDB.PUBLIC"/>
        <sequence incrementSize="3" name="SEQ_MEMBER_LOGIN" schema="EXAMPLEDB.PUBLIC"/>
        <sequence incrementSize="1"
            name="SYSTEM_SEQUENCE_FA1684DA_3756_43F8_8864_B63B7B02D7E0" schema="EXAMPLEDB.PUBLIC"/>
        <sequence incrementSize="-1" name="SEQ_DECREMENT" schema="EXAMPLEDB.PUBLIC"/>
    </sequenceGroup>
    <procedureGroup>
        <procedure name="FN_NO_PARAMETER" schema="EXAMPLEDB.PUBLIC"
            sourceHash="e550b4a6" sourceLine="6" sourceSize="52"/>
        <procedure name="SP_NO_PARAMETER" schema="EXAMPLEDB.PUBLIC"
            sourceHash="57f9d752" sourceLine="6" sourceSize="120"/>
    </procedureGroup>
</database>
